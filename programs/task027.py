def p(g):
 R=range(-2,3);n=enumerate;A={(i,j)for i,r in n(g)for j,e in n(r)if e};i,j=max({(i,j)for i in R for j in R},key=lambda x:(max(A)==max(C:={(j+x[0],9-i+x[1])for i,j in A}))+len(A&C))
 for I,J in A:g[a][b]=2-g[a:=J+i][b:=9-I+j]
 return g