def p(g,A=range(-2,3),c=enumerate,E=abs):k=eval(str(g));[k[I+D].__setitem__(C+F,[B[C-1],H][E(D)==E(F)])for(I,B)in c(g)for(C,H)in c(B)if H and B[C-1]*B[C+1]for D in A for F in A if E(D)==E(F)or D*F==0];return k